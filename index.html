<!-- Reproductor mejorado con Plyr.js -->
<div id="reproductor" style="display:none; max-width: 1000px; margin: auto;">
  <video id="video-player" playsinline controls style="width:100%; height:auto;">
    <source src="" type="application/x-mpegURL" />
  </video>
</div>

<!-- Plyr.js (CSS y JS) -->
<link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
<script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<script>
  const video = document.getElementById('video-player');
  const reproductor = document.getElementById('reproductor');
  const peliculas = document.querySelectorAll('.pelicula');

  const player = new Plyr(video);

  peliculas.forEach(peli => {
    peli.addEventListener('click', () => {
      const url = peli.getAttribute('data-video');

      if (Hls.isSupported()) {
        const hls = new Hls();
        hls.loadSource(url);
        hls.attachMedia(video);
        hls.on(Hls.Events.MANIFEST_PARSED, () => {
          reproductor.style.display = 'block';
          video.play();
        });
      } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
        video.src = url;
        reproductor.style.display = 'block';
        video.play();
      } else {
        alert('Tu navegador no soporta este tipo de video.');
      }
    });
  });
</script>
